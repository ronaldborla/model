{"version":3,"file":"model.js","sources":["../src/utils.ts","../src/collection.ts","../src/exception.ts","../src/model.ts","../src/key.ts","../src/schema.ts","../src/type.ts","../src/index.ts"],"sourcesContent":["/**\n * Utilities\n */\nexport class Utils {\n\n  /**\n   * Undefined\n   */\n  public undefined: any;\n\n  constructor() {\n    this.undefined = ((undefined) => {\n      return undefined;\n    })();\n  }\n\n  /**\n   * To camel case\n   */\n  camelCase(str: string): string {\n    return str.replace(/[-_]+/g, ' ').replace(/(?:^\\w|[A-Z]|\\b\\w|[\\s-_]+)/g, function(match, index) {\n      if (+match === 0) {\n        return '';\n      }\n      return index === 0 ? match.toLowerCase() : match.toUpperCase();\n    });\n  }\n\n  /**\n   * Extend object\n   */\n  extend(left: any, right: any, ignore?: Array<string>): any {\n    const hasIgnore = this.isArray(ignore);\n    this.forEach(right, (value: any, name: string) => {\n      if (!hasIgnore || ignore.indexOf(name) < 0) {\n        left[name] = value;\n      }\n    });\n    return left;\n  }\n\n  /**\n   * Flatten array of string\n   */\n  flatten(data: any): any {\n    const flattened = {\n      __flattened: true\n    };\n    if (!this.isUndefined(data)) {\n      const keys = [];\n      (data || []).forEach((item) => {\n        const pos = item.indexOf('.'),\n              left = (pos >= 0) ? item.substr(0, pos) : item,\n              right = (pos >= 0) ? item.substr(pos + 1) : '';\n        if (right) {\n          if (this.isUndefined(flattened[left])) {\n            flattened[left] = [];\n          }\n          if (flattened[left] !== true) {\n            if (keys.indexOf(left) < 0) {\n              keys.push(left);\n            }\n            flattened[left].push(right);\n          }\n        } else {\n          flattened[left] = true;\n        }\n      });\n      keys.forEach((key) => {\n        if (flattened[key] !== true) {\n          flattened[key] = this.flatten(flattened[key]);\n        }\n      });\n    }\n    return flattened;\n  }\n\n  /**\n   * Loop through object\n   */\n  forEach(object: any, callback: any): boolean {\n    for (let o in object) {\n      if (object.hasOwnProperty(o)) {\n        if (callback.apply(object, [object[o], o, object]) === false) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Get parent constructor\n   */\n  getParent(constructor: any): any {\n    const parent = Object.getPrototypeOf(constructor.prototype);\n    if (parent) {\n      return parent.constructor;\n    }\n    return null;\n  }\n\n  /**\n   * Check if variable is an array\n   */\n  isArray(variable: any): boolean {\n    return variable && (variable.constructor === Array);\n  }\n\n  /**\n   * Check if function\n   */\n  isFunction(variable: any): boolean {\n    return !!(variable && variable.constructor && variable.call && variable.apply);\n  }\n\n  /**\n   * Check if object\n   */\n  isObject(variable: any): boolean {\n    return typeof variable === 'object';\n  }\n\n  /**\n   * Check if regex\n   */\n  isRegExp(variable: any): boolean {\n    return variable instanceof RegExp;\n  }\n\n  /**\n   * Check if string\n   */\n  isString(variable: any): boolean {\n    return (typeof variable === 'string') || (variable instanceof String);\n  }\n\n  /**\n   * Is undefined\n   */\n  isUndefined(variable: any): boolean {\n    return variable === this.undefined;\n  }\n}\n\nconst utils = new Utils();\n\nexport default utils;\n","import utils from './utils';\n\n/**\n * Collection\n */\nexport default class Collection<M> {\n  [index: number]: M;\n\n  /**\n   * The Model\n   */\n  public static Model: any;\n\n  /**\n   * Is Collection\n   */\n  public static isCollection = true;\n\n  /**\n   * Private storage\n   */\n  public __: any = {\n    parent: null\n  };\n\n  /**\n   * Length\n   * Arrays have a \"length\" writable property\n   */\n  public length: number;\n\n  constructor(items?: Array<any>) {\n    if (!utils.isUndefined(items)) {\n      this.load(items);\n    }\n  }\n\n  /**\n   * Placeholder methods\n   */\n  cast(item: any): M {\n    return item;\n  }\n  concat(...items: any[]): M[] {\n    return [];\n  }\n  copyWithin(target: number, start?: number, end?: number): this {\n    return this;\n  }\n  every(callbackfn: (value: M, index: number, array: M[]) => boolean, thisArg?: any): boolean {\n    return false;\n  }\n  fill(value: any, start?: number, end?: number): this {\n    return this;\n  }\n  filter(callbackfn: (value: M, index: number, array: M[]) => any, thisArg?: any): M[] {\n    return [];\n  }\n  find(callbackfn: (value: any, index: number, array: any[]) => void, thisArg?: any): any {\n    return this;\n  }\n  findIndex(callbackfn: (value: any, index: number, array: any[]) => void, thisArg?: any): number {\n    return 0;\n  }\n  forEach(callbackfn: (value: M, index: number, array: M[]) => void, thisArg?: any): void {\n  }\n  indexOf(searchElement: any, fromIndex?: number): number {\n    return 0;\n  }\n  join(separator?: string): string {\n    return '';\n  }\n  lastIndexOf(searchElement: any, fromIndex?: number): number {\n    return 0;\n  }\n  load(items: Array<any>): Collection<M> {\n    return this;\n  }\n  map<U>(callbackfn: (value: M, index: number, array: M[]) => U, thisArg?: any): U[] {\n    return [];\n  }\n  pop(): M | undefined {\n    return undefined;\n  }\n  push(...items: any[]): number {\n    return 0;\n  }\n  reduce(callbackfn: (previousValue: M, currentValue: M, currentIndex: number, array: M[]) => M, initialValue?: M): M {\n    return this[0];\n  }\n  reduceRight(callbackfn: (previousValue: M, currentValue: M, currentIndex: number, array: M[]) => M, initialValue?: M): M {\n    return this[0];\n  }\n  reverse(): M[] {\n    return [];\n  }\n  shift(): M | undefined {\n    return undefined;\n  }\n  slice(start?: number, end?: number): M[] {\n    return [];\n  }\n  some(callbackfn: (value: M, index: number, array: M[]) => boolean, thisArg?: any): boolean {\n    return false;\n  }\n  splice(start: number, deleteCount?: number, ...items: any[]): M[] {\n    return [];\n  }\n  sort(compareFn?: (a: M, b: M) => number) : this {\n    return this;\n  }\n  toObject(include?: any, exclude?: any): any {\n    return {};\n  }\n  toJSON(exclude?: any, include?: any, replacer?: any, space?: number): string {\n    return '';\n  }\n  toLocaleString(): string {\n    return '';\n  }\n  toString(): string {\n    return '';\n  }\n  unshift(...items: any[]): number {\n    return 0;\n  }\n}\n\n/**\n * For some reason, \"extends\" in typescript doesn't correctly extend an Array\n * Therefore, this needs to be done in a different manner\n * The \"extends Array\" statement above is for Typescript consistency\n */\n\n/**\n * Extend Array\n */\nCollection.prototype = Object.create(Array.prototype);\nCollection.prototype.constructor = Collection;\n\n/**\n * Collection functions must be declared outside the Class definition\n */\n(Collection.prototype as any).cast = cast;\n(Collection.prototype as any).concat = concat;\n(Collection.prototype as any).load = load;\n(Collection.prototype as any).push = push;\n(Collection.prototype as any).splice = splice;\n(Collection.prototype as any).toJSON = toJSON;\n(Collection.prototype as any).toObject = toObject;\n(Collection.prototype as any).toString = toString;\n(Collection.prototype as any).unshift = unshift;\n\n////////\n\n/**\n * Cast an item\n */\nfunction cast(item: any): any {\n  const Model = (this.constructor as typeof Collection).Model;\n  if (!(item instanceof Model)) {\n    item = new Model(item);\n  }\n  item.__.parent = this;\n  return item;\n}\n\n/**\n * Override concat\n */\nfunction concat<M>(): Collection<M> {\n  const length = arguments.length;\n  for (let i = 0; i < length; i++) {\n    this.push.apply(this, arguments[i]);\n  }\n  return this;\n}\n\n/**\n * Load items\n */\nfunction load<M>(items: Array<any>): Collection<M> {\n  this.push.apply(this, items || []);\n  return this;\n}\n\n/**\n * Override push\n */\nfunction push(): number {\n  return Array.prototype.push.apply(this, Array.prototype.map.apply(arguments, [(item: any) => {\n    return this.cast(item);\n  }]));\n}\n\n/**\n * Override splice\n */\nfunction splice<M>(): Collection<M> {\n  const length = arguments.length;\n  if (length > 2) {\n    for (let i = 2; i < length; i++) {\n      arguments[i] = this.cast(arguments[i]);\n    }\n  }\n  return Array.prototype.splice.apply(this, arguments);\n}\n\n/**\n * To JSON\n */\nfunction toJSON(exclude?: any, include?: any, replacer?: any, space?: number): string {\n  return JSON.stringify(this.toObject(exclude, include), replacer, space);\n}\n\n/**\n * Convert to object\n */\nfunction toObject(include?: any, exclude?: any): any {\n  if (include && !include.__flattened) {\n    include = utils.flatten(include);\n  }\n  if (exclude && !exclude.__flattened) {\n    exclude = utils.flatten(exclude);\n  }\n  return this.map((item: any) => {\n    return item.toObject(include, exclude);\n  });\n}\n\n/**\n * To string\n */\nfunction toString(): string {\n  return this.toJSON();\n}\n\n/**\n * Override unshift\n */\nfunction unshift(): number {\n  const length = arguments.length;\n  for (let i = 0; i < length; i++) {\n    arguments[i] = this.cast(arguments[i]);\n  }\n  return Array.prototype.unshift.apply(this, arguments);\n}\n","/**\n * Validator Exception\n */\nexport default class Exception extends Error {\n\n\n}\n","import utils from './utils';\n\n/**\n * Model\n */\nexport default class Model {\n  /**\n   * Loose property definition\n   * This allows for valid access to dynamic\n   * properties defined in the schema\n   */\n  [key: string]: any;\n\n  /**\n   * The Collection\n   */\n  public static Collection: any = 'Collection';\n\n  /**\n   * The schema\n   */\n  public static schema: any = {};\n\n  /**\n   * Is Model\n   */\n  public static isModel = true;\n\n  /**\n   * Private storage\n   */\n  public __: any = {\n    attributes: {},\n    parent: null\n  };\n\n  constructor(data?: any) {\n    (this.constructor as typeof Model).schema.keys.forEach((key: any) => {\n      if (data && !utils.isUndefined(data[key.name])) {\n        this[key.name] = data[key.name];\n      } else if (utils.isFunction(key.default)) {\n        this[key.name] = key.default();\n      } else if (!utils.isUndefined(key.default)) {\n        this[key.name] = key.default;\n      }\n    });\n  }\n\n  /**\n   * Load data\n   */\n  load(data?: any): this {\n    const schema = (this.constructor as typeof Model).schema;\n    if (!utils.isUndefined(data)) {\n      utils.forEach(data, (value: any, key: any) => {\n        if (!utils.isUndefined(value) && !utils.isUndefined(schema.cache.index.keys[key])) {\n          this[key] = value;\n        }\n      });\n    }\n    return this;\n  }\n\n  /**\n   * To JSON\n   */\n  toJSON(exclude?: any, include?: any, replacer?: any, space?: number): string {\n    return JSON.stringify(this.toObject(exclude, include), replacer, space);\n  }\n\n  /**\n   * Convert model to object\n   */\n  toObject(include?: any, exclude?: any): any {\n    const object = {};\n    if (include && !include.__flattened) {\n      include = utils.flatten(include);\n    }\n    if (exclude && !exclude.__flattened) {\n      exclude = utils.flatten(exclude);\n    }\n    (this.constructor as typeof Model).schema.keys.forEach((key: any) => {\n      if (key.hidden !== true && (!exclude || exclude[key.name] !== true)) {\n        evaluate(key.name, this[key.name]);\n      }\n    });\n    if (include) {\n      utils.forEach(include, (children: any, key: string) => {\n        evaluate(key, this[key]);\n      });\n    }\n    return object;\n\n    /**\n     * Evaluate\n     */\n    function evaluate(key: string, value: any) {\n      if (value) {\n        if (value.constructor && (value.constructor.isModel === true || value.constructor.isCollection === true)) {\n          value = value.toObject(\n            (include && (typeof include[key] !== 'boolean')) ? include[key] : utils.undefined,\n            (exclude && (typeof exclude[key] !== 'boolean')) ? exclude[key] : utils.undefined);\n        } else if (utils.isFunction(value.toObject)) {\n          value = value.toObject();\n        }\n      }\n      if (!utils.isUndefined(value)) {\n        object[key] = value;\n      }\n    }\n  }\n\n  /**\n   * To string\n   */\n  toString(): string {\n    return this.toJSON();\n  }\n}\n","import Collection from './collection';\nimport Model from './model';\nimport Type from './type';\nimport utils from './utils';\n\n/**\n * Key\n */\nexport default class Key {\n\n  /**\n   * Default value\n   */\n  public default: any;\n\n  /**\n   * Hidden\n   */\n  public hidden: boolean;\n\n  /**\n   * Name\n   */\n  public name: string;\n\n  /**\n   * Key options\n   */\n  public options: any;\n\n  /**\n   * Schema\n   */\n  public schema: any;\n\n  /**\n   * Type\n   */\n  public type: Type;\n\n  constructor(schema: any, name: string, object: any) {\n    const key = this;\n    this.default = object.default;\n    this.hidden = (object.hidden === true);\n    this.name = name;\n    this.options = object.options;\n    this.schema = schema;\n    let type = object.type || object;\n    if (utils.isString(type)) {\n      type = this.schema.modeljs.types[type];\n    }\n    if (utils.isUndefined(type)) {\n      throw new this.schema.modeljs.Exception('Type for key `' + name + '` is not registered');\n    }\n    this.type = new this.schema.modeljs.Type(this, type);\n    Object.defineProperty(this.schema.Model.prototype, this.name, {\n      enumerable: true,\n      get: function getAttribute() {\n        return callMutator.apply(this, ['get', this.__.attributes[key.name]]);\n      },\n      set: function setAttribute(value: any) {\n        this.__.attributes[key.name] = callMutator.apply(this, ['set',\n          setParent(key.cast(this, value), this),\n          this.__.attributes[key.name]\n        ]);\n      }\n    });\n\n    /**\n     * Call mutator\n     */\n    function callMutator(method: string, value: any, previous?: any): any {\n      let mutator = key.schema.cache.mutators[method][key.name];\n      if (utils.isUndefined(mutator)) {\n        let fn = utils.camelCase([method, name, 'attribute'].join(' '));\n        mutator =\n          key.schema.cache.mutators[method][name] =\n          utils.isFunction(this[fn]) ? fn : null;\n      }\n      if (mutator !== null) {\n        value = this[mutator].apply(this, [value, previous]);\n      }\n      /**\n       * Use primitive value\n       * When initializing native types such as Boolean, Number, etc.,\n       * an object is returned, causing issues with strict comparison\n       * Therefore, to solve this, the primitive value must be used.\n       * As for custom types, the primitive value returned by valueOf()\n       * is its original form. So theoretically, this will not affect\n       * the custom types\n       */\n      if (value && utils.isFunction(value.valueOf)) {\n        value = value.valueOf();\n      }\n      return value;\n    }\n\n    /**\n     * Set Model or Collection parent\n     */\n    function setParent(value: any, parent: any): any {\n      if (value && ((value instanceof Model) || (value instanceof Collection))) {\n        value.__.parent = parent;\n      }\n      return value;\n    }\n  }\n\n  /**\n   * Cast\n   */\n  cast(model: Model, value: any): any {\n    const options = utils.isUndefined(this.options) ? utils.undefined : utils.extend({}, this.options);\n    if (!utils.isUndefined(options)) {\n      options.key = this;\n      options.parent = model;\n    }\n    return this.type.cast(value, options);\n  }\n}\n","import Key from './key';\nimport Model from './model';\nimport utils from './utils';\n\n/**\n * Schema\n */\nexport default class Schema {\n\n  /**\n   * Schema keys\n   */\n  public keys: Array<Key> = [];\n\n  /**\n   * The model\n   */\n  public Model: any;\n\n  /**\n   * The Model JS object\n   */\n  public modeljs: any;\n\n  /**\n   * Cache\n   */\n  public cache: any = {\n    index: {\n      keys: {}\n    },\n    mutators: {\n      get: {},\n      set: {}\n    }\n  };\n\n  constructor(modeljs: any, model: any) {\n    const constructors = [],\n          schema = {};\n    this.modeljs = modeljs;\n    this.Model = model;\n    if (utils.isUndefined(this.modeljs.types[(this.Model as any).Collection])) {\n      throw new this.modeljs.Exception('Collection `' + (this.Model as any).Collection + '` is not registered');\n    }\n    this.Model.Collection = this.modeljs.types[(this.Model as any).Collection];\n    this.Model.Collection.Model = this.Model;\n    while (model && (model !== (Model as any))) {\n      constructors.push(model);\n      model = utils.getParent(model);\n    }\n    for (let i = constructors.length - 1; i >= 0; i--) {\n      utils.extend(schema, constructors[i].schema);\n    }\n    let index = 0;\n    utils.forEach(schema, (value, name) => {\n      const key = new this.modeljs.Key(this, name, value);\n      this.cache.index.keys[name] = index++;\n      this.keys.push(key);\n    });\n  }\n}\n","import utils from './utils';\n/**\n * Type\n */\nexport default class Type {\n\n  /**\n   * Type Constructor\n   */\n  public Constructor: any;\n\n  /**\n   * Constructor has compare method\n   */\n  public hasCompare: boolean;\n\n  /**\n   * The key\n   */\n  public key: any;\n\n  /**\n   * Type name\n   */\n  public name: string;\n\n  /**\n   * Safe name\n   */\n  public safe: string;\n\n  constructor(key: any, Constructor: any) {\n    this.key = key;\n    if (!utils.isFunction(Constructor)) {\n      throw new this.key.schema.modeljs.Error('Type must be a constructor');\n    }\n    this.Constructor = Constructor;\n    this.hasCompare = utils.isFunction(this.Constructor.prototype.compare);\n    this.name = this.Constructor.name;\n    this.safe = this.name.toLowerCase();\n  }\n\n  /**\n   * Cast\n   */\n  cast(value: any, options?: any): any {\n    if (value === null) {\n      return value;\n    }\n    if (!this.is(value)) {\n      value = utils.isUndefined(options) ?\n        new this.Constructor(value) :\n        new this.Constructor(value, options);\n    }\n    return value;\n  }\n\n  /**\n   * Compare\n   * Compare two values\n   * @return -1 if a is less than b, 1 if a is greater than b, 0 if equal\n   */\n  compare(a: any, b: any): number {\n    if (this.hasCompare === true) {\n      return a.compare(b);\n    }\n    if (a > b) {\n      return 1;\n    }\n    if (b > a) {\n      return -1;\n    }\n    return 0;\n  }\n\n  /**\n   * Check if value is instance of this type\n   */\n  is(value: any): boolean {\n    return value && (\n      (value instanceof this.Constructor) ||\n      (value.constructor.name === this.Constructor.name) ||\n      ((typeof value).toLowerCase() === this.safe)\n    );\n  }\n}\n","import Collection from './collection';\nimport Exception from './exception';\nimport Key from './key';\nimport Model from './model';\nimport Schema from './schema';\nimport Type from './type';\nimport { Utils } from './utils';\nimport utils from './utils';\n\nexport { Collection, Exception, Key, Model, Schema, Type, Utils, utils };\n\n/**\n * Model JS\n */\nexport class ModelJS {\n\n  /**\n   * Exception to use\n   */\n  public Exception: any = Exception;\n\n  /**\n   * Key to use\n   */\n  public Key: any = Key;\n\n  /**\n   * Schema to use\n   */\n  public Schema: any = Schema;\n\n  /**\n   * Type to use\n   */\n  public Type: any = Type;\n\n  /**\n   * All types\n   */\n  public types = {};\n\n  /**\n   * All schemas\n   */\n  public schemas: Array<Schema> = [];\n\n  /**\n   * Boot Model JS\n   */\n  boot(): this {\n    Object.keys(this.types).forEach((key: string) => {\n      if (this.types[key].isModel === true) {\n        this.schemas.push(new this.Schema(this, this.types[key]));\n      }\n    });\n    this.schemas.forEach((schema: Schema) => {\n      (schema.Model as any).schema = schema;\n    });\n    return this;\n  }\n\n  /**\n   * Get all collections\n   */\n  getCollections(): Array<Collection<Model>> {\n    return Object.keys(this.types).filter((key: string) => {\n      return this.types[key].isCollection === true;\n    }).map((key) => {\n      return this.types[key];\n    });\n  }\n\n  /**\n   * Get all models\n   */\n  getModels(): Array<Model> {\n    return Object.keys(this.types).filter((key: string) => {\n      return this.types[key].isModel === true;\n    }).map((key) => {\n      return this.types[key];\n    });\n  }\n\n  /**\n   * Register types\n   */\n  register(types: any): this {\n    if (!utils.isArray(types)) {\n      types = [types];\n    }\n    types.forEach((type: any) => {\n      this.types[type.name] = type;\n    });\n    return this;\n  }\n}\n"],"names":[],"mappings":"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"}